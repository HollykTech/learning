#!/bin/python3
import socket, sys
from threading import Thread
server=socket.socket(socket.AF_INET, socket.SOCK_STREAM)
def connectClient(client,address):
	while True:
		data=client.recv(1024)
		print(address[0]+":"+str(address[1])+" > "+data.decode())
def sendMessage(client):
	while True:
		data=input()+"\n"
		client.send(data.encode())
try:
	server.bind(("0.0.0.0",777))
	server.listen(5)
	print("Server init...")
	client,address=server.accept()
	t_cclient=Thread(target=connectClient, args=[client,address])
	t_smessage=Thread(target=sendMessage, args=[client])
	t_cclient.start()
	t_smessage.start()
except Exception as erro:
	print(erro)
	server.close()
